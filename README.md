# java-filmorate
Template repository for Filmorate project.

![–î–∏–∞–≥—Ä–∞–º–º–∞ –ë–î filmorate-project](https://raw.githubusercontent.com/AlexanderTuzhikov/java-filmorate/90f03d66dcb3b66b95d9dd997a3bc56230a548a5/Filmorate%20project.png)

## –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Filmorate

–î–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ **Filmorate** ‚Äî —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ñ–∏–ª—å–º–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–∑–µ–π –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –ø–æ –ª–∞–π–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ñ–∏–ª—å–º–∞–º–∏, –∂–∞–Ω—Ä–∞–º–∏ –∏ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ (MPA), –∞ —Ç–∞–∫–∂–µ —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥—Ä—É–∂–±–µ –∏ —Å—Ç–∞—Ç—É—Å–∞—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

---

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

**`films`** ‚Äî —Ö—Ä–∞–Ω–∏—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∏–ª—å–º–∞—Ö:  
- `film_id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á  
- `name`, `description`, `releaseDate`, `duration` ‚Äî —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ñ–∏–ª—å–º–∞  
- `mpa_id` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥ (—Ç–∞–±–ª–∏—Ü–∞ `MPA`)

**`users`** ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö:  
- `user_id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á  
- `email`, `login`, `name`, `birthday` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**`genres`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∂–∞–Ω—Ä–æ–≤ —Ñ–∏–ª—å–º–æ–≤  
**`mpa`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤

---

### –¢–∞–±–ª–∏—Ü—ã —Å–≤—è–∑–µ–π (–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º)

**`films_genres`** ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ñ–∏–ª—å–º—ã –∏ –∂–∞–Ω—Ä—ã  
- –°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á `(film_id, genre_id)` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—ã

**`films_likes`** ‚Äî —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ª–∞–π–∫–∞—Ö —Ñ–∏–ª—å–º–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏  
- –°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á `(film_id, user_id)` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ª–∞–π–∫ –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ –æ–¥–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

### –î—Ä—É–∑—å—è –∏ —Å—Ç–∞—Ç—É—Å—ã

**`users_friends`** ‚Äî —Ö—Ä–∞–Ω–∏—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–¥—Ä—É–∂–±—É)  
- –°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á `(user_id, friend_id)`  
- `friendship_status_id` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ç—É—Å –¥—Ä—É–∂–±—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´–æ–∂–∏–¥–∞–Ω–∏–µ¬ª, ¬´–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ¬ª)

**`friendship_status`** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥—Ä—É–∂–±—ã

---

## –û—Å–Ω–æ–≤–Ω—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–µ–∫—Ç–∞ Filmorate

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `users`, `users_friends`, `films` –∏ `films_likes`.  
–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–Ω–∞–±–∂—ë–Ω –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º, —á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç.

---

## üîπ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```sql
SELECT *
FROM users;
–í—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã users.

–ü–æ–ª—è: user_id, email, login, name, birthday.

2. –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
sql
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
SELECT *
FROM users
WHERE user_id = {id};
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º user_id.

{id} –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä.

3. –ü–æ–ª—É—á–∏—Ç—å –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sql
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
SELECT *
FROM users
WHERE user_id IN (
    SELECT friend_id
    FROM users_friends
    WHERE user_id = {id}
);
–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ ID –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {id}.

–í–Ω–µ—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —ç—Ç–∏—Ö –¥—Ä—É–∑–µ–π.

4. –ü–æ–ª—É—á–∏—Ç—å –æ–±—â–∏—Ö –¥—Ä—É–∑–µ–π –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
sql
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
SELECT *
FROM users
WHERE user_id IN (
    SELECT friend_id
    FROM users_friends
    WHERE user_id = {id}
      AND friend_id IN (
          SELECT friend_id
          FROM users_friends
          WHERE user_id = {other_id}
      )
);
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –¥—Ä—É–∑—å—è–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —É {id} –∏ {other_id}.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ –¥—Ä—É–∑–µ–π.
